<!DOCTYPE html>
<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<head>
    <title>Result</title>

    <script>
        function openDetail(channel_type, channel_name, post_date) {
            $('#channel_type').val(channel_type);
            $('#channel_name').val(channel_name);
            $('#post_date').val(post_date);
            $('#form').submit()
        }

        $(function(){
        });

    </script>
</head>
<body>
    <p>
        検索結果：{{ data_count }}&nbsp;件
    </p>
    <br />
    <table border="1" width="98%">
        <tr>
            <th width="5%">
                詳細
            </th>
            <th width="7%">
                channel
            </th>
            <th width="10%">
                投稿者
            </th>
            <th width="12%">
                投稿日
            </th>
            <th width="66%">
                メッセージ
            </th>
            <th style="display:none">
                channel_type
            </th>
        </tr>
        {% for record in result_list %}
            <tr>
                <td>
                    <button onclick="javascript: openDetail('{{ record.channel_type }}', '{{ record.channel_name }}', '{{ record.post_date }}')">詳細</button>
                </td>
                <td>
                    {{ record.channel_name }}
                </td>
                <td>
                    {% if record.post_name != '' %}
                        <img src="../icon/{{ record.post_name }}.jpg" />
                    {% endif %}
                    {{ record.post_name }}
                </td>
                <td>
                    {{ record.post_date }}
                </td>
                <td style="white-space:pre-wrap">
                    {{ record.post_message|safe }}
                </td>
                <td style="display:none">
                    {{ record.channel_type }}
                </td>
            </tr>
        {% endfor %}
    </table>
    <form id="form" name="form" action="/detail" method="post" target="_blank" >
        <input type="hidden" id="channel_type" name="channel_type" value="" />
        <input type="hidden" id="channel_name" name="channel_name" value="" />
        <input type="hidden" id="post_date" name="post_date" value="" />
        <input type="hidden" id="search_val" name="search_val" value="{{ search_val }}" />
    </form>
</body>
</html>